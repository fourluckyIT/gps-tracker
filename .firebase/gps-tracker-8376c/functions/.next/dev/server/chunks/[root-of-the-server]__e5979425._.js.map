{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///Users/itfourlucky/Desktop/gps-tracker/lib/firebase.js"],"sourcesContent":["import { initializeApp, getApps } from \"firebase/app\";\nimport { getFirestore } from \"firebase/firestore\";\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n};\n\n// Initialize Firebase\nconst app = getApps().length === 0 ? initializeApp(firebaseConfig) : getApps()[0];\nconst db = getFirestore(app);\n\nexport { db };\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AAAA;;;AAEA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP;AAEA,sBAAsB;AACtB,MAAM,MAAM,IAAA,0MAAO,IAAG,MAAM,KAAK,IAAI,IAAA,gNAAa,EAAC,kBAAkB,IAAA,0MAAO,GAAE,CAAC,EAAE;AACjF,MAAM,KAAK,IAAA,gNAAY,EAAC"}},
    {"offset": {"line": 162, "column": 0}, "map": {"version":3,"sources":["file:///Users/itfourlucky/Desktop/gps-tracker/app/api/track/route.js"],"sourcesContent":["import { db } from \"@/lib/firebase\";\nimport { doc, setDoc, serverTimestamp } from \"firebase/firestore\";\nimport { NextResponse } from \"next/server\";\n\nexport async function POST(request) {\n    try {\n        const data = await request.json();\n        const { deviceId, ...rest } = data;\n\n        if (!deviceId) {\n            return NextResponse.json(\n                { error: \"Missing deviceId\" },\n                { status: 400 }\n            );\n        }\n\n        // Reference to the device document\n        // logic: Upsert (Update if exists, Create if new)\n        const deviceRef = doc(db, \"devices\", deviceId);\n\n        // Save data with server timestamp\n        await setDoc(deviceRef, {\n            deviceId,\n            ...rest,\n            lastUpdated: serverTimestamp(),\n        }, { merge: true });\n\n        return NextResponse.json({ success: true, message: \"Data received\" });\n    } catch (error) {\n        console.error(\"Error writing to Firestore:\", error);\n        return NextResponse.json(\n            { error: \"Internal Server Error\" },\n            { status: 500 }\n        );\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AACA;;;;AAEO,eAAe,KAAK,OAAO;IAC9B,IAAI;QACA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM,GAAG;QAE9B,IAAI,CAAC,UAAU;YACX,OAAO,6KAAY,CAAC,IAAI,CACpB;gBAAE,OAAO;YAAmB,GAC5B;gBAAE,QAAQ;YAAI;QAEtB;QAEA,mCAAmC;QACnC,kDAAkD;QAClD,MAAM,YAAY,IAAA,uMAAG,EAAC,oJAAE,EAAE,WAAW;QAErC,kCAAkC;QAClC,MAAM,IAAA,0MAAM,EAAC,WAAW;YACpB;YACA,GAAG,IAAI;YACP,aAAa,IAAA,mNAAe;QAChC,GAAG;YAAE,OAAO;QAAK;QAEjB,OAAO,6KAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,SAAS;QAAgB;IACvE,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO,6KAAY,CAAC,IAAI,CACpB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAEtB;AACJ"}}]
}