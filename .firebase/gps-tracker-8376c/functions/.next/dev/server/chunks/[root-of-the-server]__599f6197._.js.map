{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///Users/itfourlucky/Desktop/gps-tracker/lib/firebase.js"],"sourcesContent":["import { initializeApp, getApps } from \"firebase/app\";\nimport { getFirestore } from \"firebase/firestore\"; // Keeping for reference, but main is RTDB now\nimport { getDatabase } from \"firebase/database\";\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n  databaseURL: process.env.NEXT_PUBLIC_FIREBASE_DATABASE_URL,\n};\n\n// Initialize Firebase\nconst app = getApps().length === 0 ? initializeApp(firebaseConfig) : getApps()[0];\nconst db = getFirestore(app); // Firestore instance\nconst rtdb = getDatabase(app); // Realtime Database instance\n\nexport { db, rtdb };\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA,wVAAmD,8CAA8C;AAAjG;AACA;AAAA;;;;AAEA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;IACL,WAAW;AACb;AAEA,sBAAsB;AACtB,MAAM,MAAM,IAAA,0MAAO,IAAG,MAAM,KAAK,IAAI,IAAA,gNAAa,EAAC,kBAAkB,IAAA,0MAAO,GAAE,CAAC,EAAE;AACjF,MAAM,KAAK,IAAA,gNAAY,EAAC,MAAM,qBAAqB;AACnD,MAAM,OAAO,IAAA,mOAAW,EAAC,MAAM,6BAA6B"}},
    {"offset": {"line": 175, "column": 0}, "map": {"version":3,"sources":["file:///Users/itfourlucky/Desktop/gps-tracker/app/api/track/route.js"],"sourcesContent":["import { rtdb } from \"@/lib/firebase\";\nimport { ref, update, serverTimestamp } from \"firebase/database\";\nimport { NextResponse } from \"next/server\";\n\nexport async function POST(request) {\n    try {\n        const data = await request.json();\n        const { deviceId, ...rest } = data;\n\n        if (!deviceId) {\n            return NextResponse.json(\n                { error: \"Missing deviceId\" },\n                { status: 400 }\n            );\n        }\n\n        // Reference to the device in Realtime Database (devices/DEVICE_ID)\n        const deviceRef = ref(rtdb, `devices/${deviceId}`);\n\n        // Update data (Upsert logic)\n        await update(deviceRef, {\n            deviceId,\n            ...rest,\n            lastUpdated: serverTimestamp(), // RTDB uses a different timestamp mechanism but this SDK handles it\n        });\n\n        return NextResponse.json({ success: true, message: \"Data received\" });\n    } catch (error) {\n        console.error(\"Error writing to RTDB:\", error);\n        return NextResponse.json(\n            { error: \"Internal Server Error\" },\n            { status: 500 }\n        );\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AACA;;;;AAEO,eAAe,KAAK,OAAO;IAC9B,IAAI;QACA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM,GAAG;QAE9B,IAAI,CAAC,UAAU;YACX,OAAO,6KAAY,CAAC,IAAI,CACpB;gBAAE,OAAO;YAAmB,GAC5B;gBAAE,QAAQ;YAAI;QAEtB;QAEA,mEAAmE;QACnE,MAAM,YAAY,IAAA,2NAAG,EAAC,sJAAI,EAAE,CAAC,QAAQ,EAAE,UAAU;QAEjD,6BAA6B;QAC7B,MAAM,IAAA,8NAAM,EAAC,WAAW;YACpB;YACA,GAAG,IAAI;YACP,aAAa,IAAA,uOAAe;QAChC;QAEA,OAAO,6KAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,SAAS;QAAgB;IACvE,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,6KAAY,CAAC,IAAI,CACpB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAEtB;AACJ"}}]
}